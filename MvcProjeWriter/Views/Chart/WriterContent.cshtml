@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2 class="text-center mt-4">Yazarlara Göre İçerik Sayısı</h2>
<div id="writerChart" style="width: 100%; height: 500px;"></div>

@section Scripts {
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        google.charts.load('current', { packages: ['corechart'] });

        $(document).ready(function () {
            $.ajax({
                url: '/Chart/WriterContentChart',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    google.charts.setOnLoadCallback(function () {
                        drawWriterChart(data);
                    });
                }
            });

            function drawWriterChart(dataJson) {
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Yazar');
                data.addColumn('number', 'İçerik Sayısı');

                $.each(dataJson, function (i, item) {
                    data.addRow([item.CategoryName, item.CategoryCount]);
                });

                var options = {
                    title: 'Yazarlara Göre İçerik Sayısı',
                    is3D: true,
                    legend: { position: 'right' }
                };

                var chart = new google.visualization.PieChart(document.getElementById('writerChart'));
                chart.draw(data, options);
            }
        });
    </script>
}
